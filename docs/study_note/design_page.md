行存储设计(OLTP=row Store 行存储)

一个page只对应一个table
page大小：4kb

固定字段
[page head]
字段1:数据库的版本(8位+8位,255.255)====16位,2个字节

字段2:该page的总大小(对于4kb的表大小,需要15位,但是为了方便改为16位后续同理)====16位,2个字节

字段3:该page已经使用的大小(对于4kb的表大小,实际15位,需要16位)====16位,2个字节

字段4:该page空闲的大小(对于4kb的表大小,实际15位,需要16位)====16位,2个字节

数据字段
[tuple pointer]
字段1:唯一的tuple id(15位)====16位,2个字节

字段2:tuple的偏移量(15位,第一个tuple pointer的偏移量一定是文件末尾往前)====16位,2个字节

字段3:该tuple所占用的长度(15位)====16位,2个字节

字段4:对对应tuple里字段的存在,该字段需要向上取整,例如需要5位,则需要8位/一个字节
    若有5个字段,5个字段均有值,则该字段为11111
    若只有前3个字段,则该字段为11100


[tuple]
tuple从文件尾部插入,表结构应该提前获取

例如只有一条数据的int int bool
|[page head]-[tuple pointer]----------int-int-bool|

字段1:该字段是否位定长(1位，1是定长,0是动态长度)====8位,1个字节

(可能不存在)字段2:若字段1是0,表示该字段为动态字段,则该字段表示动态长度(15位),若字段1是1,则没有该字段====16位,2个字节

(可能不存在)字段3:若字段1是0，则该字段为变长数据的checksum(15位)====16位,2个字节

字段4:实际存储的数据字段




列存储设计(OLAP=column Store 列存储)



